<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
	UserInfo login(UserInfo userInfo);
	int signup(UserInfo userInfo);	
	UserInfo getUserInfo(String userid);	
	int modifyUserInfo(UserInfo userInfo);	
	int deleteUserInfo(String userid);
	int setInterestDistrict(Map<String, String> map);
-->

<mapper namespace="com.whereismyhome.model.dao.UserDAO">

	<select id="login" parameterType="UserInfo" resultType="UserInfo">
		select userid, password, username from user where userid=#{userid} and password=#{password}
	</select>
	
	<insert id="signup" parameterType="UserInfo">
		insert into user(userid,password,username) values(#{userid}, #{password}, #{username})
	</insert>
	
	<select id="getUserInfo" parameterType="String" resultType="UserInfo">
		select userid, username from user where userid=#{userid}
	</select>
	
	<update id="modifyUserInfo" parameterType="UserInfo">
		update user set username=#{username}
		
		<if test="password != null and password != ''">
			, password=#{password}
		</if>
		
		where userid=#{userid}
	</update>
	
	<delete id="deleteUserInfo" parameterType="String">
		delete from user where userid=#{userid}
	</delete>
	
	<update id="setInterestDistrict" parameterType="map">
		update user set interest=#{dongCode} where userid=#{userid}
	</update>
	
</mapper>